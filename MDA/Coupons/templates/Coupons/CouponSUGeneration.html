{% extends "socius/base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% block navbar %}
  <div class="sidebar-wrapper">
        <ul class="nav">
          <li class="nav-item ">
            <a class="nav-link" href="./dashboard.html">
              <i class="material-icons">dashboard</i>
              <p>Dashboard</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="./user.html">
              <i class="material-icons">person</i>
              <p>User Profile</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="{% url 'create' %}">
              <i class="material-icons">create_new_folder</i>
              <p>Create Directory</p>
            </a>
          </li>
          <li class="nav-item active ">
            <a class="nav-link" href="{% url 'SuCoupon' %}">
              <i class="material-icons">dynamic_feed</i>
              <p>Manage Coupons</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="#">
              <i class="material-icons">today</i>
              <p>Events</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="#">
              <i class="material-icons">call_split</i>
              <p>Document Sharing</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <a class="navbar-brand" href="{% url 'SuCoupon' %}">Manage Coupons</a>
          </div>
{% endblock navbar %}

{% block content %}
  <div class="container-fluid">
          <div class="row">
            <div class="col-md-8">
              <div class="card">
                <div class="card-header card-header-primary">
                  <h4 class="card-title">Coupon Generator</h4>
                  <p class="card-category">{{ user.get_username }}</p>
                </div>
                <div class="card-body">
                  <form method="POST">
                    {% csrf_token %}
                    <div class="row">
                      <div class="column col-md-4 mb-0">
                        {{ form_su.category|as_crispy_field }}
                        <br>{{ form_su.code|as_crispy_field }}
                        <button type="button" class="btn btn-primary" onclick="generate()">Generate</button> 
                      </div>
                       <div class="column col-md-4 mb-0" style="float: right; left: 110px">
                          <br><br>{{ form_su.valid_from|as_crispy_field }}
                          <br><br>{{ form_su.valid_till|as_crispy_field }}
                          <br><div id="div_id_Directory" class="form-group">
                            <label for="id_Directory" class=" requiredField">
                                Directory<span class="asteriskField">*</span>
                            </label>
                            <div class="">
                            <select name="Directory" class="select form-control" required="" id="id_Directory">
                              <option value="" selected="">---------</option>
                              {% for directory in directories %}
                                <option value="{{ directory.DirectoryName }}">{{ directory.DirectoryName }}</option>                              
                              {% endfor %}
                            </select>
                            </div> 
                          </div>
                          <input type="hidden" id="Name" name="Name" value="{{ user.get_username }}" readonly><br>
                        </div>
                    </div>
                  <div class="form-row">
                    <div class="form-group col-md-5 mb-0">
                      {{ form_su.description|as_crispy_field }}
                    </div>
                  </div>
                  <div class="form-group col-md-2 mb-0">
                     {{ form_su.active }}
                     <label for="id_active" class="form-check-label">
                      Active
                    </label>
                  </div>
                  <button class="btn btn-primary" type="submit">Save</button>
                  </form>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <button class="btn btn-primary btn-round" onclick="location.href='{% url 'SUCoupon_table' %}'"><i class="material-icons">table_view</i> View Coupons</button>
            </div>
          </div>
        </div>
{% endblock content %}